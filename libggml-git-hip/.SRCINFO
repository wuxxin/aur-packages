pkgbase = libggml-git-hip
	pkgdesc = libggml, llama.cpp, whisper.cpp, python-llama-cpp - HIP accelerated, shared library, git version
	pkgver = 7974.r6.g262364e
	pkgrel = 1
	url = https://github.com/ggml-org/llama.cpp
	arch = x86_64
	license = MIT
	license = Apache-2.0
	license = GPL-3.0-or-later
	makedepends = cmake
	makedepends = git
	makedepends = ninja
	makedepends = rocm-hip-sdk
	makedepends = rocm-toolchain
	makedepends = python-build
	makedepends = python-installer
	makedepends = python-wheel
	makedepends = python-setuptools
	makedepends = python-scikit-build-core
	makedepends = sdl2-compat
	makedepends = curl
	options = !lto
	options = !debug
	options = !buildflags
	source = llama.cpp::git+https://github.com/ggml-org/llama.cpp.git
	source = whisper.cpp::git+https://github.com/ggerganov/whisper.cpp.git
	source = llama-cpp-python::git+https://github.com/abetlen/llama-cpp-python.git
	source = vec-wmma-boost.patch
	source = README.md
	source = cache_test.py
	sha256sums = SKIP
	sha256sums = SKIP
	sha256sums = SKIP
	sha256sums = SKIP
	sha256sums = SKIP
	sha256sums = SKIP

pkgname = libggml-git-hip
	pkgdesc = Tensor library for machine learning (HIP/ROCm optimized) - HEAD
	depends = hip-runtime-amd
	depends = hipblas
	depends = rocblas
	provides = libggml
	provides = libggml-git
	provides = libggml-git-hip
	conflicts = libggml
	conflicts = libggml-git
	conflicts = libggml-git-vulkan

pkgname = llama.cpp-git-ggml-hip
	pkgdesc = Port of Facebook's LLaMA model in C/C++ (git shared library build)
	depends = libggml-git-hip
	depends = curl
	depends = hip-runtime-amd
	depends = hipblas
	depends = rocblas
	provides = llama.cpp
	provides = llama.cpp-hip
	conflicts = llama.cpp
	conflicts = llama.cpp-hip

pkgname = whisper.cpp-git-ggml-hip
	pkgdesc = Port of OpenAI's Whisper model (git shared library build)
	depends = libggml-git-hip
	depends = sdl2-compat
	depends = hip-runtime-amd
	provides = whisper.cpp
	provides = whisper.cpp-hip

pkgname = python-llama-cpp-git-ggml-hip
	pkgdesc = Python bindings for llama.cpp (git shared library build)
	depends = llama.cpp-git-ggml-hip
	depends = libggml-git-hip
	depends = python-numpy
	provides = python-llama-cpp
	provides = python-llama-cpp-hip
