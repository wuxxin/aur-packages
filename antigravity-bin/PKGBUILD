# Maintainer:
_pkgbase=antigravity
pkgname=antigravity-bin
pkgver=1.11.2
_buildid=6251250307170304
pkgrel=5
pkgdesc="Antigravity - Google Agentic IDE (Sandboxed & disabled Auto-Update)"
arch=('x86_64')
url="https://antigravity.google"
license=('custom')
depends=('gtk3' 'nss' 'libxss' 'alsa-lib' 'libxtst' 'xdg-utils' 'bubblewrap' 'libdrm' 'mesa')
provides=('antigravity')
conflicts=('antigravity')
source=(
    "https://edgedl.me.gvt1.com/edgedl/release2/j0qc3/antigravity/stable/${pkgver}-${_buildid}/linux-x64/Antigravity.tar.gz"
    "antigravity-launcher.sh"
    "antigravity.desktop"
    "antigravity.png"
)
sha256sums=('d1b1115ae76c275c376ea660e1e4d2dc20eb3e72d6a206b096505b944a5f64b7'
            'fe11061e49b7d00454f51ff0ba84eeb568e46a3d5f29a1e76dda71444203496a'
            '50daa6c8db870ce9b42f1c0aabc28aeff8555d93f72be62990054b6e27fbc78b'
            '8f0b95d2d21dbf930b4d100e2fdc4505673e900a731aa56ea633a4b59c312799')

prepare() {
    # DISABLE AUTO-UPDATE: Electron apps use this file for update checks.
    msg2 "Disabling internal auto-updater..."
    rm -f "Antigravity/resources/app-update.yml"
}

package() {
    # Install Application to /opt
    install -d "${pkgdir}/opt/${_pkgbase}"
    cp -a "Antigravity/"* "${pkgdir}/opt/${_pkgbase}/"
    install -Dm755 "antigravity-launcher.sh" "${pkgdir}/usr/bin/antigravity"
    install -Dm644 "antigravity.desktop" "${pkgdir}/usr/share/applications/antigravity.desktop"
    install -Dm644 "antigravity.png" "${pkgdir}/usr/share/pixmaps/antigravity.png"
}
